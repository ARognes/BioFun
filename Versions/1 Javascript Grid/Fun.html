<!DOCTYPE html>
<html>
	<header>
		<h2>Castle Plant</h2>
	</header>
		<body>
		<canvas id="canvas1" width="640" height="480" style="border:1px solid black">
		Your browser does not support the HTML5 canvas tag
		</canvas>
		<script>

	//Images
var img0 = document.createElement("img");
img0.src = "img0.png";
var img1 = document.createElement("img");
img1.src = "img1.png";
var img2 = document.createElement("img");
img2.src = "img2.png";
	
var c = document.getElementById("canvas1");
var ctx = c.getContext("2d");
var size = 8;
var mouseX = 0;
var mouseY = 0;
var tile = [];

/*document.onmousedown = function (mouse) {
	selected = -1;
}*/

function updateTiles () {
	var canvasSquare = canvas1.height/size;
	var push = canvas1.width/2-canvas1.height/2;
	var tileNum = 0;
	var gridSnap = [Math.round ((mouseX)/canvasSquare-2)*canvasSquare+push, Math.round ((mouseY+canvasSquare/2)/canvasSquare-2)*canvasSquare];
	for (var x = 0; x < size; x++) {
		for (var y = 0; y < size; y++) {
			tileNum++;
			if (tile.length <= tileNum) tile.push (0);
			if (tile.length > tileNum) {
				if (x == gridSnap [0] && y == gridSnap [1]) {
					document.onmousedown = function (mouse) {}		
				}

				if (tile [tileNum] == 0) ctx.drawImage (img0, x*canvasSquare+push, y*canvasSquare, canvasSquare, canvasSquare);
				else if (tile [tileNum] == 0) ctx.drawImage (img1, x*canvasSquare+push, y*canvasSquare, canvasSquare, canvasSquare);
			}
		}
	}
	ctx.drawImage (img2, gridSnap [0], gridSnap [1], canvasSquare, canvasSquare);
}

update = function () {
	canvas1.width = 640;
	canvas1.height = 480;
	updateTiles ();
}


document.onmousemove = function (mouse) {
	mouseX = mouse.clientX;
	mouseY = mouse.clientY;
}

setInterval (update, 1);

		</script>
	</body>
</html>